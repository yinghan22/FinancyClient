import{d as E,u as C,H as I,r as c,a as S,b as l,c as B,w as d,o as N,e as r,h as w,i as m,p as $,q as k,_ as z}from"./index-88c55bfa.js";const M=i=>($("data-v-b3ec1cd6"),i=i(),k(),i),U=M(()=>w("h3",null,"登录",-1)),j={style:{width:"100%",height:"100%",display:"flex","justify-content":"flex-end"}},q=E({__name:"index",setup(i){const u=C(),_=I(),x=(t,e,o)=>{if(e=e.trim(),e)o();else return o(new Error("请输入您的工号"))},y=(t,e,o)=>{if(e=e.trim(),e){if(e.length<6)return o(new Error("请重新输入您的密码"));o()}else return o(new Error("请输入您的密码"))},s=c({id:"",password:""}),a=S(),g=c({id:[{validator:x,trigger:"blur"}],password:[{validator:y,trigger:"blur"}]}),v=t=>{t&&t.resetFields()},b=t=>{t&&t.validate(e=>{e&&u.dispatch("login",{id:s.id,password:s.password,success(){_.push(`/${u.getters.userinfo.usertype}`)},error(){_.push("/login")}})})};return(t,e)=>{const o=l("el-input"),p=l("el-form-item"),f=l("el-button"),V=l("el-form"),h=l("el-col");return N(),B(h,{span:9,style:{border:"1px solid #EEE","border-radius":"5px",padding:"10px"}},{default:d(()=>[U,r(V,{ref_key:"form_ref",ref:a,model:s,rules:g},{default:d(()=>[r(p,{label:"工号",prop:"id"},{default:d(()=>[r(o,{modelValue:s.id,"onUpdate:modelValue":e[0]||(e[0]=n=>s.id=n),modelModifiers:{lazy:!0}},null,8,["modelValue"])]),_:1}),r(p,{label:"密码",prop:"password"},{default:d(()=>[r(o,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=n=>s.password=n),modelModifiers:{lazy:!0},type:"password"},null,8,["modelValue"])]),_:1}),r(p,null,{default:d(()=>[w("div",j,[r(f,{type:"danger",onClick:e[2]||(e[2]=n=>v(a.value))},{default:d(()=>[m(" 重置 ")]),_:1}),r(f,{type:"primary",onClick:e[3]||(e[3]=n=>b(a.value))},{default:d(()=>[m(" 登录 ")]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1})}}});const H=z(q,[["__scopeId","data-v-b3ec1cd6"]]);export{H as default};
